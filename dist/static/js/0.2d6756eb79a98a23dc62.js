webpackJsonp([0,1],{"2cfp":function(t,e){},"4Gmx":function(t,e){},"8SrF":function(t,e){},"8rN5":function(t,e){t.exports="data:image/png;base64,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"},"9C7Y":function(t,e){},h1MZ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("4YfN"),a=n.n(o),i=(n("+VlJ"),n("vdVF")),r={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n  home    \n")])},staticRenderFns:[]},s=n("C7Lr")({name:"home",data:function(){return{}},methods:{},watch:{},mounted:function(){}},r,!1,null,null,null).exports,l={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n  portal    \n")])},staticRenderFns:[]},c=n("C7Lr")({name:"portal",data:function(){return{}},methods:{},watch:{},mounted:function(){}},l,!1,null,null,null).exports,u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%",display:"flex","flex-direction":"column"}},[n("div",{staticClass:"dialog-toolbar"},[n("TextBox",{staticStyle:{width:"100%",padding:"0",border:"none",background:"none","box-shadow":"none"},attrs:{inputId:"url",placeholder:"请输入url",inputStyle:{borderRadius:0}},on:{blur:function(e){t.goUrl()}},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}},[n("Addon",{staticClass:"center",attrs:{align:"left"}},[n("LinkButton",{attrs:{disabled:!0,plain:!0}},[t._v("地址：")])],1),t._v(" "),n("Addon",{attrs:{align:"right"}},[n("LinkButton",{attrs:{iconCls:"fa fa-fw fa-search",disabled:!0,plain:!0}})],1)],1)],1),t._v(" "),n("iframe",{staticStyle:{flex:"1 0 auto",border:"none"},attrs:{src:t.formatUrl}})])},staticRenderFns:[]},d=n("C7Lr")({name:"browser",data:function(){return{url:"",formatUrl:""}},computed:{},methods:{goUrl:function(){var t=""+this.url;t&&"http"!=t.substr(0,4)&&(t="http://"+t),this.formatUrl=t}},watch:{},mounted:function(){}},u,!1,null,null,null).exports,p={name:"workflow",data:function(){return{total:0,pageSize:10,data:[]}},methods:{list:function(){var t=this;utils.http.post("/workflow/workflow/list",{example:{},pageNum:1,pageSize:10}).then(function(e){console.log(e),t.data=e.data.body.data.data,t.total=e.data.body.data.total,t.pageSize=e.data.body.data.pageSize,t.pageNum=e.data.body.data.pageSize},function(t){})}},watch:{},mounted:function(){this.list()}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box-datagrid"},[n("div",{staticClass:"dialog-toolbar"},[n("LinkButton",{attrs:{iconCls:"icon-add",plain:!0}},[t._v("新建")]),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-remove",plain:!0}},[t._v("删除")]),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-edit",plain:!0}},[t._v("修改")]),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-yes",plain:!0}},[t._v("启用")]),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-no",plain:!0}},[t._v("禁用")]),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-start",plain:!0}},[t._v("发起")]),t._v(" "),n("LinkButton",{staticStyle:{float:"right"},attrs:{iconCls:"icon-search",plain:!0}},[t._v("搜索")])],1),t._v(" "),n("DataGrid",{staticStyle:{height:"100%"},attrs:{groupField:"processCategoryId",pagePosition:"bottom",pagination:!0,total:t.total,pageSize:t.pageSize,data:t.data,border:!1},scopedSlots:t._u([{key:"group",fn:function(e){return[n("span",{staticStyle:{"font-weight":"bold"}},[t._v("\n        "+t._s(e.value)+" - "),n("span",{staticStyle:{color:"red"}},[t._v(t._s(e.rows.length))]),t._v(" Item(s)\n      ")])]}}])},[n("GridColumn",{attrs:{width:"30"}}),t._v(" "),n("GridColumn",{attrs:{field:"name",title:"Name"}}),t._v(" "),n("GridColumn",{attrs:{field:"versionNo",title:"版本号"}}),t._v(" "),n("GridColumn",{attrs:{field:"processKey",title:"流程标识"}}),t._v(" "),n("GridColumn",{attrs:{field:"memo",title:"描述"}}),t._v(" "),n("GridColumn",{attrs:{field:"status",title:"状态"}}),t._v(" "),n("GridColumn",{attrs:{field:"insertTime",title:"创建时间"}}),t._v(" "),n("GridColumn",{attrs:{field:"updateTime",title:"更新时间"}})],1)],1)},staticRenderFns:[]},m=n("C7Lr")(p,g,!1,null,null,null).exports,h={name:"remoteScript",props:["src","callback"],mounted:function(){var t=this,e=document.createElement("script");e.type="text/javascript",e.src=this.src,e.onload=e.readystatechange=function(){e.readyState&&!/loaded|complete/.test(e.readyState)||(t.$emit("callback"),e.onload=e.readystatechange=null)},document.body.appendChild(e)}},f={render:function(){var t=this.$createElement;return(this._self._c||t)("i",{staticStyle:{display:"none"}})},staticRenderFns:[]},v=[{group:"基本配置",label:"流程名称",value:""},{group:"基本配置",label:"流程key",value:""},{group:"权限配置",label:"权限配置",value:""},{group:"权限配置",label:"状态",value:"已发布"}],b=[{label:"开始",type:"start"},{label:"任务",type:"task"},{label:"结束",type:"end"},{label:"异常",type:"error"}],x={save:function(){var t=(new mxCodec).encode(editor.graph.model),e=mxUtils.getXml(t,editor.linefeed);console.log(e),utils.http.post("/workflow/workflow/save",{graphXml:e}).then(function(t){console.log(t)})}},k={name:"workflowEditor",components:{remotescript:n("C7Lr")(h,f,!1,null,null,null).exports},data:function(){return{configProperties:v,graphNodes:b}},methods:a()({},x,{initMxgraph:function(){window.mxBasePath="static/lib/mxgraph",window.mxLoadResources=!1,window.mxObjectCodec.allowEval=!0;var t=window.mxUtils.load("static/lib/mxgraph/config/workflow-editor.xml").getDocumentElement();window.editor=new window.mxEditor(t),window.graph=editor.graph,function(){graph.setConnectable(!0),graph.setAutoSizeCells(!0),graph.graphHandler.guidesEnabled=!0;var t=graph.getPreferredSizeForCell;graph.getPreferredSizeForCell=function(e){var n=t.apply(this,arguments);if(null!=n){var o=function(t){for(var e=[0,0],n=0;n<t.length;n++)null!=t.charAt(n).match(/[^\x00-\xff]/gi)?e[0]+=1:e[1]+=1;return e}(e.getAttribute("label")),a=15.5*o[0]+8.2*o[1];n.width=Math.max(96,36+a)}return n},graph.addListener(mxEvent.LABEL_CHANGED,function(t,e){var n=e.getProperty("cell");if(showProperties(n),graph.model.isVertex(n)&&!n.getAttribute("isSymbol")){var o=n.edges;for(var a in o){var i=o[a];i.target==n&&i.setAttribute("label","to "+n.getAttribute("label"))}var r=graph.getModel(),s=graph.getPreferredSizeForCell(n),l=r.getGeometry(n);l.width=s.width,l.height=s.height}}),graph.addListener(mxEvent.CELL_CONNECTED,function(t,e){var n=e.getProperty("edge"),o=e.getProperty("source"),a=e.getProperty("terminal");!o&&a&&n.setAttribute("label","to "+a.getAttribute("label"))}),graph.selectionModel.addListener(mxEvent.CHANGE,function(t,e){})}(),function(){for(var t=editor.getTemplate("start"),e=editor.getTemplate("end"),n=editor.getTemplate("error"),o=editor.getTemplate("task"),a=document.querySelectorAll(".graphElement"),i=[new mxCell(t.value,t.geometry,t.style),new mxCell(o.value,o.geometry,o.style),new mxCell(e.value,e.geometry,e.style),new mxCell(n.value,n.geometry,n.style)],r=function(t){var e=[i[t]];e[0].vertex=!0;var n=document.createElement("div");n.className="drop-no",n.innerHTML='<img src="'+a[t].src+'" width="48" height="48"/><div class="icon-drop"></div>';var o=mxUtils.makeDraggable(a[t],graph,function(t,n,o,a,i){if((e=t.getImportableCells(e)).length>0){var r=null!=o&&t.isValidDropTarget(o,e,n),s=null;null==o||r||0!=t.getModel().getChildCount(o)||t.getModel().isVertex(o)!=e[0].vertex?(null==o||r||(o=null),t.isSplitEnabled()&&t.isSplitTarget(o,e,n)?(t.splitEdge(o,e,null,a,i),s=e):(e=t.getImportableCells(e)).length>0&&(s=t.importCells(e,a,i,o))):(t.getModel().setStyle(o,style),s=[o]),null!=s&&s.length>0&&(t.scrollCellToVisible(s[0]),t.setSelectionCells(s))}},n,-5,-5,graph.autoscroll,!0,!0);document.querySelector(".graph-container"),o.dragEnter=function(){document.querySelector(".drop-no").className="drop-yes"},o.dragExit=function(){document.querySelector(".drop-yes").className="drop-no"}},s=0;s<i.length;s++)r(s)}()}}),watch:{},mounted:function(){}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{position:"absolute",width:"100%",height:"100%",padding:"2px"}},[n("Layout",[n("LayoutPanel",{staticStyle:{width:"120px"},attrs:{title:"工具箱",region:"west",bodyStyle:{position:"relative"}}},[n("Accordion",{staticStyle:{position:"absolute",width:"100%",height:"100%"},attrs:{animate:!0,border:!1}},[n("AccordionPanel",{attrs:{title:"流程节点"}},t._l(t.graphNodes,function(e,o){return n("div",{staticClass:"graph-node"},[n("div",[n("img",{staticClass:"graphElement",attrs:{src:"static/img/mxgraph/"+e.type+".png"}})]),t._v(" "),n("div",[t._v(t._s(e.label))])])}),0),t._v(" "),n("AccordionPanel",{attrs:{title:"流程导向"}},[n("p",[t._v("Content2")])]),t._v(" "),n("AccordionPanel",{attrs:{title:"其他工具"}},[n("p",[t._v("Content3")])])],1)],1),t._v(" "),n("LayoutPanel",{staticStyle:{height:"100%",margin:"0 3px"},attrs:{title:"制作流程",region:"center",bodyStyle:{position:"relative"}}},[n("Layout",{staticStyle:{position:"absolute",width:"100%",height:"100%"}},[n("LayoutPanel",{attrs:{region:"north",border:!1}},[n("div",{staticClass:"dialog-toolbar graph-toolbar"},[n("LinkButton",{attrs:{iconCls:"icon-save",plain:!0},on:{click:function(e){t.save()}}}),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-print",plain:!0}}),t._v(" "),n("div",{staticClass:"datagrid-btn-separator"}),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-copy",plain:!0}}),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-paste",plain:!0}}),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-cut",plain:!0}}),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-delete",plain:!0}}),t._v(" "),n("div",{staticClass:"datagrid-btn-separator"}),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-undo",plain:!0}}),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-redo",plain:!0}}),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-reset",plain:!0}}),t._v(" "),n("div",{staticClass:"datagrid-btn-separator"}),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-zoom-in",plain:!0}}),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-zoom-out",plain:!0}}),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-zoom-original",plain:!0}}),t._v(" "),n("div",{staticClass:"datagrid-btn-separator"}),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-straight",plain:!0}}),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-curve",plain:!0}}),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-grid",plain:!0}}),t._v(" "),n("div",{staticClass:"datagrid-btn-separator"}),t._v(" "),n("LinkButton",{attrs:{iconCls:"icon-help",plain:!0}})],1)]),t._v(" "),n("LayoutPanel",{staticStyle:{width:"100%",height:"100%"},attrs:{region:"center",border:!1,bodyStyle:{position:"relative"}}},[n("div",{staticClass:"graph-container",attrs:{id:"graph"}})])],1)],1),t._v(" "),n("LayoutPanel",{staticStyle:{width:"240px"},attrs:{title:"节点配置",region:"east"}},[n("DataGrid",{attrs:{data:t.configProperties,groupField:"group",border:!1},scopedSlots:t._u([{key:"group",fn:function(e){return[n("span",{staticStyle:{"font-weight":"bold"}},[t._v("\n            "+t._s(e.value)+"\n          ")])]}}])},[n("GridColumn",{attrs:{field:"label",title:"属性",width:"100"}}),t._v(" "),n("GridColumn",{attrs:{field:"value",title:"值"}})],1)],1)],1),t._v(" "),n("remotescript",{attrs:{src:"static/lib/mxgraph/js/mxClient.js"},on:{callback:t.initMxgraph}})],1)},staticRenderFns:[]};var y=n("C7Lr")(k,C,!1,function(t){n("4Gmx"),n("2cfp")},"data-v-6c3c50d2",null).exports,w={name:"Dynamic",props:["component"],components:{Login:i.default,Home:s,Portal:c,Browser:d,Workflow:m,WorkflowEditor:y},data:function(){return{}},methods:{},watch:{},mounted:function(){}},S={render:function(){var t=this.$createElement,e=this._self._c||t;return"login"==this.component?e("Login"):"home"==this.component?e("Home"):"portal"==this.component?e("Portal"):"browser"==this.component?e("Browser"):"workflow"==this.component?e("Workflow"):"workflowEditor"==this.component?e("WorkflowEditor"):this._e()},staticRenderFns:[]},L=n("C7Lr")(w,S,!1,null,null,null).exports,A=(n("8SrF"),[{name:"browser",text:"浏览器",icon:"../static/img/icon32/browser_32.png",top:0,left:0,insertTime:"2019-01-01 00:00:00"},{name:"home",text:"我的任务",icon:"../static/img/icon32/task_32.png",top:80,left:0,insertTime:"2019-01-02 00:00:00"},{name:"portal",text:"系统门户",icon:"../static/img/icon32/portal_32.png",top:160,left:0,insertTime:"2019-01-16 00:00:00"},{name:"workflowEditor",text:"流程设计",icon:"../static/img/icon32/workflow_32.png",top:80,left:80,insertTime:"2019-01-22 00:00:00"},{name:"workflow",text:"流程管理",icon:"../static/img/icon32/list_32.png",top:0,left:80,insertTime:"2019-01-23 00:00:00"}]),_=[{text:"主题风格",value:"",iconCls:"icon-color",children:[{value:"theme-black",text:"black",iconCls:"icon-color"},{value:"theme-bootstrap",text:"bootstrap",iconCls:"icon-color"},{value:"theme-gray",text:"gray",iconCls:"icon-color"},{value:"theme-material",text:"material",iconCls:"icon-color"},{value:"theme-material-teal",text:"material-teal",iconCls:"icon-color"},{value:"theme-ui-sunny",text:"ui-sunny",iconCls:"icon-color"},{value:"theme-ui-pepper-grinder",text:"ui-pepper-grinder",iconCls:"icon-color"},{value:"theme-ui-dark-hive",text:"ui-dark-hive",iconCls:"icon-color"},{value:"theme-ui-cupertino",text:"ui-cupertino",iconCls:"icon-color"},{value:"theme-metro-red",text:"metro-red",iconCls:"icon-color"},{value:"theme-metro-orange",text:"metro-orange",iconCls:"icon-color"},{value:"theme-metro-green",text:"metro-green",iconCls:"icon-color"},{value:"theme-metro-gray",text:"metro-gray",iconCls:"icon-color"},{value:"theme-metro-blue",text:"metro-blue",iconCls:"icon-color"}]},{value:"背景图片",text:"背景图片",iconCls:"icon-desktop",children:[{value:"bg-1.jpg",text:"1.jpg",iconCls:"icon-desktop"},{value:"bg-2.jpg",text:"2.jpg",iconCls:"icon-desktop"},{value:"bg-3.jpg",text:"3.jpg",iconCls:"icon-desktop"},{value:"bg-4.jpg",text:"4.jpg",iconCls:"icon-desktop"},{value:"bg-5.jpg",text:"5.jpg",iconCls:"icon-desktop"},{value:"bg-6.jpg",text:"6.jpg",iconCls:"icon-desktop"},{value:"bg-7.jpg",text:"7.jpg",iconCls:"icon-desktop"},{value:"bg-8.jpg",text:"8.jpg",iconCls:"icon-desktop"},{value:"bg-9.jpg",text:"9.jpg",iconCls:"icon-desktop"},{value:"bg-10.jpg",text:"10.jpg",iconCls:"icon-desktop"}]},{text:"自动排序",iconCls:"icon-sort",children:[{value:"sort-name-asc",text:"按名称升序",iconCls:"icon-sort-name-asc"},{value:"sort-name-desc",text:"按名称降序",iconCls:"icon-sort-name-desc"},{value:"sort-time-asc",text:"按时间升序",iconCls:"icon-sort-time-asc"},{value:"sort-time-desc",text:"按时间降序",iconCls:"icon-sort-time-desc"}]},{value:"lock-screen",text:"锁定屏幕",iconCls:"icon-lock"},{value:"个人设置",text:"个人设置",iconCls:"icon-config"},{value:"办公模式",text:"办公模式",iconCls:"icon-work"},{value:"fullscreen",text:"全屏显示",iconCls:"icon-fullscreen"}],E=[{group:"我的工作区",items:[{name:"我的门户",icon:"",url:""},{name:"我的任务",icon:"",url:""},{name:"已办任务",icon:"",url:""},{name:"消息提醒",icon:"",url:""},{name:"个人设置",icon:"",url:""},{name:"日程计划",icon:"",url:""},{name:"意见箱",icon:"",url:""},{name:"系统公告",icon:"",url:""}]},{group:"系统设置",items:[{name:"流程列表",icon:"",url:""},{name:"表单列表",icon:"",url:""},{name:"校验规则列表",icon:"",url:""},{name:"用户列表",icon:"",url:""},{name:"角色列表",icon:"",url:""},{name:"菜单列表",icon:"",url:""}]},{group:"其他",items:[{name:"使用帮助",icon:"",url:""}]}],M=[{name:"全屏",icon:"fa-user",url:""},{name:"办公模式",icon:"fa-user",url:""},{name:"个人设置",icon:"fa-user",url:""},{name:"注销",icon:"fa-user",url:""}],B=n("9rMa"),T=n("YtJ0"),G=80;function z(t){var e=parseInt(t/G,10)*G;return Math.abs(t%G)>G/2&&(e+=t>0?G:-1*G),e}function D(t){var e=t.target.$el,n=t.target.$el.parentNode;return t.left<0?t.left=0:t.left+e.offsetWidth>n.offsetWidth&&(t.left=n.offsetWidth-e.offsetWidth),t.top<0?t.top=0:t.top+e.offsetHeight>n.offsetHeight&&(t.top=parseInt(n.offsetHeight/G,10)*G-e.offsetHeight),t}var F={name:"desktop",components:{dynamic:L},data:function(){return{dragMenu:null,sorting:!1,desktopMenus:A,contextMenus:_,startDialog:{closed:!0,startMenus:E,funcs:M},taskbar:{date:"",time:"",week:"",tasks:{},showCalendar:!1}}},computed:{},methods:a()({},Object(B.c)({lock:"LOCK",loading:"TOGGLE_LOADING"}),{onDragStart:function(t,e){t=D(t),this.dragMenu=e.name},onDrag:function(t){(t=D(t)).target.applyDrag()},onDragEnd:function(t,e){t.left=z(t.left),t.top=z(t.top),(t=D(t)).target.$el.style.transition="all .1s";for(var n=null,o=0;o<this.desktopMenus.length;o++)n=this.desktopMenus[o],console.log(n,e),n.left==t.left&&n.top==t.top&&(t.left=e.left,t.top=e.top);e.left=t.left,e.top=t.top,t.target.applyDrag(),setTimeout(function(){t.target.$el.style.transition=""},110),this.dragMenu=null},open:function(t){this.$set(this.taskbar.tasks,t.name,t)},openTask:function(t){console.log(this.$refs[t.name]),this.$refs[t.name].open()},closeTask:function(t){var e=this;this.$nextTick(function(){e.$delete(e.taskbar.tasks,t.name)})},startDialogOpen:function(t){var e=this;setTimeout(function(){e.$refs.startDialog.$el.style.left=0})},onContextMenu:function(t){var e=this;if(-1!=t.indexOf("theme-"))T.a.commit("THEME",t.substr(6));else if(-1!=t.indexOf("bg-"))T.a.commit("BG",t.substr(3));else if(-1!=t.indexOf("sort-")){var n=t.substr(5).split("-");this.sortDesktopMenu(n[0],n[1])}else-1!=t.indexOf("fullscreen")?this.fullscreen():-1!=t.indexOf("lock-")&&(this.loading(!0),setTimeout(function(){e.lock(!0),e.loading(!1)},1e3))},sortDesktopMenu:function(t,e){var n=this;this.sorting=!0;var o=[].concat(this.desktopMenus);o.sort(function(n,o){return"time"==t?"asc"==e?n.insertTime>o.insertTime?1:-1:n.insertTime<o.insertTime?1:-1:"name"==t?"asc"==e?n.text.localeCompare(o.text):o.text.localeCompare(n.text):void 0});var a=this.screenHeight-42,i=parseInt(a/G,10);setTimeout(function(){for(var t=0;t<n.desktopMenus.length;t++)for(var e=0;e<o.length;e++)if(n.desktopMenus[t].name==o[e].name){var a=n.desktopMenus[t];a.left=parseInt(e/i,10)*G,a.top=parseInt(e%i,10)*G;break}},100),setTimeout(function(){n.sorting=!1},600)},fullscreen:function(){var t=!1;if(document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.fullscreen?t=!0:screen.width-document.body.scrollWidth<=1&&screen.height-document.body.scrollHeight<=1&&(t=!0),t){var e=document.exitFullscreen||document.cancelFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen;if(void 0!==e&&e)e.call(document);else if(void 0!==window.ActiveXObject){null!=(a=new ActiveXObject("WScript.Shell"))&&a.SendKeys("{F11}")}}else{var n=document.documentElement,o=n.requestFullScreen||n.webkitRequestFullScreen||n.mozRequestFullScreen||n.msRequestFullScreen;if(void 0!==o&&o)o.call(n);else if(void 0!==window.ActiveXObject)try{var a;null!=(a=new ActiveXObject("WScript.Shell"))&&a.SendKeys("{F11}")}catch(t){alert("安全设置","此功能需要开启【对未标记为可安全执行脚本的AciveX控件初始化并执行脚本】！")}}},initTime:function(t){if(void 0!=t){var e=new Date(t+1e3),n=e.getFullYear(),o=e.getMonth()+1,a=e.getDate(),i=e.getHours(),r=e.getMinutes(),s=e.getSeconds(),l=e.getDay(),c=[n,o<10?"0"+o:o,a<10?"0"+a:a,i<10?"0"+i:i,r<10?"0"+r:r,s<10?"0"+s:s,l];this.taskbar.date=c[0]+"-"+c[1]+"-"+c[2],this.taskbar.time=c[3]+":"+c[4],this.taskbar.week="周"+["日","一","二","三","四","五","六"][c[6]]}},init:function(){this.initTime((new Date).getTime())}}),watch:{},mounted:function(){this.init();this.desktopMenus[4]}},j={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{position:"absolute",width:"100%",height:"100%"}},[o("link",{attrs:{rel:"stylesheet",href:"../static/css/icon.css"}}),t._v(" "),o("Layout",{style:{background:"url(../static/img/desktop/"+t.$store.state.common.ui.bg+")"}},[o("LayoutPanel",{style:{width:"100%",height:t.screenHeight-42+"px"},attrs:{region:"center",border:!1,bodyStyle:{background:"none"}},nativeOn:{contextmenu:function(e){e.preventDefault(),t.$refs.desktopMenu.showContextMenu(e.pageX,e.pageY)}}},[t._l(t.desktopMenus,function(e,n){return o("a",{directives:[{name:"Draggable",rawName:"v-Draggable",value:{cursor:"default",dragStart:function(n){t.onDragStart(n,e)},drag:t.onDrag,dragEnd:function(n){t.onDragEnd(n,e)}},expression:"{cursor:'default', dragStart: (d)=>{onDragStart(d, menu)}, drag: onDrag, dragEnd: (d)=>{onDragEnd(d, menu)}}"}],staticClass:"desktop-menu",style:{opacity:t.dragMenu==e.name?.5:1,left:e.left+"px",top:e.top+"px",transition:t.sorting?"all .5s":""},on:{dblclick:function(n){t.open(e)}}},[o("img",{attrs:{src:e.icon}}),t._v(" "),o("span",[t._v(t._s(e.text))])])}),t._v(" "),o("div",{ref:"calendar",staticClass:"easyui-calendar",staticStyle:{display:"none",position:"absolute",right:"0",bottom:"0"}}),t._v(" "),o("img",{ref:"recycle",staticStyle:{display:"none",opacity:"0.6",position:"absolute",right:"0",bottom:"0"},attrs:{src:n("8rN5")}}),t._v(" "),o("Calendar",{directives:[{name:"show",rawName:"v-show",value:t.taskbar.showCalendar,expression:"taskbar.showCalendar"}],staticStyle:{position:"absolute",right:"0",bottom:"0",width:"250px",height:"250px"}}),t._v(" "),o("Menu",{ref:"desktopMenu",staticStyle:{width:"150px"},on:{itemClick:t.onContextMenu}},t._l(t.contextMenus,function(e,n){return o("MenuItem",{key:n,attrs:{value:e.value,text:e.text,iconCls:e.iconCls}},[e.children?o("SubMenu",t._l(e.children,function(t,e){return o("MenuItem",{key:e,attrs:{value:t.value,text:t.text,iconCls:t.iconCls}})}),1):t._e()],1)}),1),t._v(" "),t._l(t.taskbar.tasks,function(e,n,a){return o("Dialog",{key:n,ref:e.name,refInFor:!0,attrs:{title:e.text,dialogStyle:{width:t.screenWidth-100+"px",height:t.screenHeight-100+"px"},bodyStyle:{display:"flex",position:"relative"},modal:!1,draggable:!0,resizable:!0,minimizable:!0,maximizable:!0},on:{close:function(n){t.closeTask(e)}}},[o("dynamic",{attrs:{component:e.name}})],1)}),t._v(" "),o("Dialog",{ref:"startDialog",attrs:{title:"管理员",closable:!1,closed:t.startDialog.closed,open:t.startDialogOpen(),panelCls:"startDialog"}},[o("table",{attrs:{cellspacing:"0",cellpadding:"0"}},[o("tr",[o("td",[o("div",{staticStyle:{width:"158px",padding:"10px",height:"340px"}},[o("div",{staticStyle:{height:"320px","text-align":"left"}},t._l(t.startDialog.startMenus,function(e,n){return o("SplitButton",{key:n,attrs:{text:e.group,plain:!0,iconCls:"fa fa-book"}},[o("Menu",t._l(e.items,function(t,e){return o("MenuItem",{key:e,attrs:{text:t.name}})}),1)],1)}),1)])]),t._v(" "),o("td",[o("div",{staticClass:"panel-header",staticStyle:{height:"350px","border-top":"0px","border-right":"0px","border-bottom":"0px"}},[o("div",{staticClass:"center",staticStyle:{cursor:"pointer",margin:"15px auto 5px"}},[o("i",{staticClass:"fa fa-user",staticStyle:{"font-size":"48px"}})]),t._v(" "),o("div",{staticClass:"screen-name"}),t._v(" "),o("div",{staticClass:"menu-seq"}),t._v(" "),o("div",{staticStyle:{width:"100px",height:"80px"}}),t._v(" "),o("div",{staticStyle:{position:"absolute",bottom:"3px",width:"100px"}},[t._l(t.startDialog.funcs,function(e,n){return[o("LinkButton",{attrs:{plain:!0,iconCls:"fa "+e.icon}},[t._v(t._s(e.name))]),t._v(" "),n!=t.startDialog.funcs.length-1?o("div",{staticClass:"menu-seq"}):t._e()]})],2)])])])])])],2),t._v(" "),o("LayoutPanel",{staticStyle:{height:"42px"},attrs:{region:"south"}},[o("div",{ref:"taskbar",staticStyle:{height:"42px"},attrs:{"data-options":"region:'south'"}},[o("div",{staticClass:"panel-header",staticStyle:{height:"40px",padding:"0",border:"0",overflow:"hidden"}},[o("table",{staticStyle:{width:"100%",height:"40px"},attrs:{cellspacing:"0",cellpadding:"0"}},[o("tr",[o("td",{staticClass:"start-box"},[o("div",{ref:"start",staticClass:"start",class:{"start-hover":!t.startDialog.closed},on:{click:function(e){t.startDialog.closed=!t.startDialog.closed}}})]),t._v(" "),o("td",{attrs:{width:"20px"}}),t._v(" "),o("td",t._l(t.taskbar.tasks,function(e,n,a){return o("button",{key:n,staticClass:"task-icon",on:{click:function(n){t.openTask(e)}}},[o("img",{attrs:{src:e.icon}})])}),0),t._v(" "),o("td",{staticClass:"time-box",on:{click:function(e){t.taskbar.showCalendar=!t.taskbar.showCalendar}}},[o("span",{staticClass:"time-box-hour"},[t._v(t._s(t.taskbar.time))]),o("span",{staticClass:"time-box-week"},[t._v(t._s(t.taskbar.week))]),o("br"),t._v(" "),o("span",{staticClass:"time-box-date"},[t._v(t._s(t.taskbar.date))])]),t._v(" "),o("td",{staticClass:"desktop-show",staticStyle:{border:"0"}},[o("span",{staticClass:"seq"})])])])])])])],1)],1)},staticRenderFns:[]};var O=n("C7Lr")(F,j,!1,function(t){n("9C7Y"),n("wVHI")},"data-v-5eaa7ad8",null);e.default=O.exports},rbNK:function(t,e){},vdVF:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("4YfN"),a=n.n(o),i=n("YtJ0"),r=n("9rMa"),s={name:"login",data:function(){return{model:{userId:"admin",username:"admin",password:"admin",captcha:"",captchaToken:""},toggle:{login:!1,loading:!1,loginType:"form"},server:Config.server,base64Img:""}},methods:a()({},Object(r.c)({doLogin:"LOGIN",doLogout:"LOGOUT"}),{getCaptcha:function(){var t=this;utils.http.post("/lxt-manage/api/user/captcha").then(function(e){t.model.captchaToken=e.data.body.data.captchaToken,t.base64Img="data:image/png;base64, "+e.data.body.data.base64Img})},login:function(){var t=this;i.a.state.common.ui.loading||(""!=this.model.captcha?(i.a.commit("TOGGLE_LOADING",!0),setTimeout(function(){utils.http.post("/lxt-manage/api/user/login",t.model).then(function(e){e.data.body.data?(t.doLogin({user:e.data.body.data.user,userSetting:e.data.body.data.userSetting}),setTimeout(function(){t.go("/page/home")},500)):(i.a.commit("TOGGLE_POPUP",{visible:!0,text:e.data.head.msg,duration:3e3}),t.getCaptcha()),setTimeout(function(){i.a.commit("TOGGLE_LOADING",!1)},1e3)},function(e){setTimeout(function(){t.go("/page/home")},500),setTimeout(function(){i.a.commit("TOGGLE_LOADING",!1)},1e3)})},10)):i.a.commit("TOGGLE_POPUP",{visible:!0,text:"验证码不能为空",duration:3e3}))},reset:function(){this.model={}},changeTab:function(){}}),watch:{server:function(t){Config.server=t}},mounted:function(){},beforeRouteEnter:function(t,e,n){n(function(t){t.doLogout(),t.getCaptcha(),t.model.captcha=""})}},l={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n  login    \n")])},staticRenderFns:[]};var c=n("C7Lr")(s,l,!1,function(t){n("rbNK")},"data-v-78e27f50",null);e.default=c.exports},wVHI:function(t,e){}});
//# sourceMappingURL=0.2d6756eb79a98a23dc62.js.map