webpackJsonp([1],{j7Oc:function(t,e){},vdVF:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("4YfN"),o=a.n(n),i=a("YtJ0"),c=a("9rMa"),u={name:"login",data:function(){return{model:{userId:"admin",username:"admin",password:"admin",captcha:"",captchaToken:""},toggle:{login:!1,loading:!1,loginType:"form"},server:Config.server,base64Img:""}},methods:o()({},Object(c.c)({doLogin:"LOGIN",doLogout:"LOGOUT"}),{getCaptcha:function(){var t=this;utils.http.post("/manage/user/captcha").then(function(e){t.model.captchaToken=e.data.body.data.captchaToken,t.base64Img="data:image/png;base64, "+e.data.body.data.base64Img})},login:function(){var t=this;i.a.state.common.ui.loading||(""!=this.model.captcha?(i.a.commit("TOGGLE_LOADING",!0),setTimeout(function(){utils.http.post("/manage/user/login",t.model).then(function(e){e.data.body.data?(t.doLogin({user:e.data.body.data.user,userSetting:e.data.body.data.userSetting}),setTimeout(function(){t.go("/page/home")},500)):(i.a.commit("TOGGLE_POPUP",{visible:!0,text:e.data.head.msg,duration:3e3}),t.getCaptcha()),setTimeout(function(){i.a.commit("TOGGLE_LOADING",!1)},1e3)},function(e){setTimeout(function(){t.go("/page/home")},500),setTimeout(function(){i.a.commit("TOGGLE_LOADING",!1)},1e3)})},10)):i.a.commit("TOGGLE_POPUP",{visible:!0,text:"验证码不能为空",duration:3e3}))},reset:function(){this.model={}},changeTab:function(){}}),watch:{server:function(t){Config.server=t}},mounted:function(){},beforeRouteEnter:function(t,e,a){a(function(t){t.doLogout(),t.getCaptcha(),t.model.captcha=""})}},d={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n  login    \n")])},staticRenderFns:[]};var s=a("C7Lr")(u,d,!1,function(t){a("j7Oc")},"data-v-961d2190",null);e.default=s.exports}});
//# sourceMappingURL=1.2c8ecd6a5571ce5b8ae2.js.map